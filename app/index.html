<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <link
      href="/images/charizard.png"
      rel="icon"
      sizes="80x80"
      type="image/png"
    />
    <link href="styles.css" rel="stylesheet" />
    <title>px</title>
    <script src="https://unpkg.com/@ungap/custom-elements"></script>
  </head>
  <body>
    <canvas id="image-canvas"></canvas>
    <file-drop accept="image/*" id="file-drop-target">
      <canvas id="zoom-canvas"></canvas>
      <aside class="sidebar">
        <div class="settings">
          <label>
            Zoom %
            <input id="zoom" readonly size="4" type="number" value="1" />
          </label>
        </div>
        <details>
          <summary>Settings</summary>
          <div class="settings">
            <div class="setting">
              <div class="setting-label">
                <label for="grid-size">Grid size</label>
                <input for="grid-size" is="range-number" />
              </div>
              <input
                id="grid-size"
                is="range-number-target"
                min="0"
                step="1"
                type="range"
                value="0"
              />
            </div>
            <hr class="sidebar-separator" />
            <div class="setting">
              <div class="setting-label">
                <label for="max-colors">Max colors</label>
                <input for="max-colors" is="range-number" />
              </div>
              <input
                aria-describedby="max-colors-description"
                id="max-colors"
                is="range-number-target"
                max="32"
                min="2"
                step="1"
                type="range"
                value="16"
              />
              <p id="max-colors-description" class="help-text">
                Maximum supported colors is 32.
              </p>
            </div>
            <hr class="sidebar-separator" />
            <div class="setting">
              <div class="setting-label">
                <label for="dithering">Dithering</label>
                <input for="dithering" is="range-number" />
              </div>
              <input
                id="dithering"
                is="range-number-target"
                max="1"
                min="0"
                step="0.01"
                type="range"
                value="1"
              />
            </div>
          </div>
        </details>
        <hr class="sidebar-separator" />
        <details>
          <summary>Colors</summary>
          <div class="colors" id="colors"></div>
        </details>
      </aside>
    </file-drop>
    <script>
      if (!('OffscreenCanvas' in window)) {
        document.documentElement.innerHTML =
          '<p>ðŸš« This browser version does not support <a href="https://caniuse.com/offscreencanvas">OffscreenCanvas</a>, which is required to use this app.</p>';
      }
    </script>
    <script src="range-number.js" type="module"></script>
    <script src="main.js" type="module"></script>
    <script>
      // Check that service workers are supported
      if ('serviceWorker' in navigator) {
        // Use the window load event to keep the page load performant
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js');
        });
      }
    </script>
  </body>
</html>
